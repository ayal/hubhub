!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hubhub",[],t):"object"==typeof exports?exports.hubhub=t():e.hubhub=t()}(window,(function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"HubHub",(function(){return o}));var o=function(){function e(e){this.sender_id="",this.pubsubService="",this.onMessageCB=function(e){},this.room="",this.pubsubService=e,this.sender_id=localStorage.getItem("hubhub_sender_id")||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),localStorage.setItem("hubhub_sender_id",this.sender_id)}return e.prototype.subscribe=function(e,t){var r=this;if(this.room)console.log("already subscribed to a room:",this.room);else{this.onMessageCB=t,console.log("embedding wix iframe...",this.pubsubService,this.room),this.room=e;var o=document.createElement("div");o.hidden=!0,o.id="hubhub-frame-wrap",o.innerHTML='<iframe src="'+this.pubsubService+"?room="+e+'" title="hubhub id="hubhub-frame"></iframe>',document.body.appendChild(o),console.log("embedded wix iframe...",this.pubsubService),window.addEventListener("message",(function(e){if(e.data.pubsub){var t=JSON.parse(e.data.pubsub.payload);t.sender_id===r.sender_id&&(t.self=!0),console.log("HUBHUB: got message",e.data.pubsub),r.onMessageCB&&r.onMessageCB(t)}}))}},e.prototype.sendMessage=function(e){if(e){var t=JSON.stringify({sender_id:this.sender_id,msg:e});fetch(this.pubsubService+"/_functions/pubsub?room="+this.room+"&message="+t)}},e}()}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9odWJodWIvaHViaHViLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsIm1vZHVsZXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiSHViSHViIiwicHVic3ViU2VydmljZSIsInRoaXMiLCJzZW5kZXJfaWQiLCJvbk1lc3NhZ2VDQiIsIm1zZyIsInJvb20iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicmVwbGFjZSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNldEl0ZW0iLCJzdWJzY3JpYmUiLCJjYiIsIl90aGlzIiwiY29uc29sZSIsImxvZyIsImZyYW1ld3JhcCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhpZGRlbiIsImlkIiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1lc3NhZ2UiLCJkYXRhIiwicHVic3ViIiwiSlNPTiIsInBhcnNlIiwicGF5bG9hZCIsInNlbGYiLCJzZW5kTWVzc2FnZSIsIm1zZ3N0cmluZyIsInN0cmluZ2lmeSIsImZldGNoIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4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